<div id="order-modal" class="cart-modal fixed inset-0 bg-black bg-opacity-70 z-[70] items-center justify-center p-4">
    <div class="bg-white w-full max-w-md p-8 rounded-lg">
        <h2 class="text-2xl font-bold mb-6 uppercase">–û—Ñ–æ—Ä–º–ª–µ–Ω–Ω—è –∑–∞–º–æ–≤–ª–µ–Ω–Ω—è</h2>
        <form id="order-form" class="space-y-4">
            <input type="text" id="cust-name" placeholder="–í–∞—à–µ –Ü–º'—è" required class="w-full border p-3 rounded">
            <input type="tel" id="cust-phone" placeholder="–ù–æ–º–µ—Ä —Ç–µ–ª–µ—Ñ–æ–Ω—É" required class="w-full border p-3 rounded">
            <input type="text" id="cust-city" placeholder="–ú—ñ—Å—Ç–æ —Ç–∞ –≤—ñ–¥–¥—ñ–ª–µ–Ω–Ω—è –ù–ü" required class="w-full border p-3 rounded">
            
            <div class="pt-4">
                <button type="submit" class="w-full bg-green-600 text-white py-4 font-bold uppercase hover:bg-green-700 transition">–ü—ñ–¥—Ç–≤–µ—Ä–¥–∏—Ç–∏ –∑–∞–º–æ–≤–ª–µ–Ω–Ω—è</button>
                <button type="button" onclick="closeOrderModal()" class="w-full mt-2 text-gray-500 text-sm">–°–∫–∞—Å—É–≤–∞—Ç–∏</button>
            </div>
        </form>
    </div>
</div>

<script>
    // –ù–∞–ª–∞—à—Ç—É–≤–∞–Ω–Ω—è –≤–∞—à–æ–≥–æ –±–æ—Ç–∞
    const TELEGRAM_BOT_TOKEN = '–í–ê–®_–¢–û–ö–ï–ù_–¢–£–¢';
    const TELEGRAM_CHAT_ID = '–í–ê–®_ID_–¢–£–¢';

    function checkout() {
        if (cart.length === 0) return alert("–ö–æ—à–∏–∫ –ø–æ—Ä–æ–∂–Ω—ñ–π!");
        document.getElementById('order-modal').classList.add('active');
    }

    function closeOrderModal() {
        document.getElementById('order-modal').classList.remove('active');
    }

    document.getElementById('order-form').addEventListener('submit', async (e) => {
        e.preventDefault();

        const name = document.getElementById('cust-name').value;
        const phone = document.getElementById('cust-phone').value;
        const city = document.getElementById('cust-city').value;

        const itemsList = cart.map(item => `- ${item.name} (${item.price} –≥—Ä–Ω)`).join('\n');
        const total = cart.reduce((sum, item) => sum + item.price, 0);

        const message = üõç –ù–û–í–ï –ó–ê–ú–û–í–õ–ï–ù–ù–Ø!\n\n +
                        üë§ –ö–ª—ñ—î–Ω—Ç: ${name}\n +
                        üìû –¢–µ–ª: ${phone}\n +
                        üìç –ê–¥—Ä–µ—Å–∞: ${city}\n\n +
                        üì¶ –¢–æ–≤–∞—Ä–∏:\n${itemsList}\n\n +
                        üí∞ –†–∞–∑–æ–º: ${total} –≥—Ä–Ω;

        const url = https://api.telegram.org/bot${TELEGRAM_BOT_TOKEN}/sendMessage;
        
        try {
            await fetch(url, {
                method: 'POST',
                headers: { 'Content-Type': 'application/json' },
                body: JSON.stringify({ chat_id: TELEGRAM_CHAT_ID, text: message })
            });
            alert("–ó–∞–º–æ–≤–ª–µ–Ω–Ω—è –ø—Ä–∏–π–Ω—è—Ç–æ! –ú–∏ –∑–≤'—è–∂–µ–º–æ—Å—è –∑ –≤–∞–º–∏ –Ω–∞–π–±–ª–∏–∂—á–∏–º —á–∞—Å–æ–º.");
            cart = [];
            updateCartUI();
            closeOrderModal();
            toggleCart();
        } catch (error) {
            alert("–ü–æ–º–∏–ª–∫–∞ –≤—ñ–¥–ø—Ä–∞–≤–∫–∏. –°–ø—Ä–æ–±—É–π—Ç–µ —â–µ —Ä–∞–∑.");
        }
    });
</script>
